<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sitevision navigation</title>
    <meta name="description" content="Lets you navigate to direct children of the current page.">
    <link rel="stylesheet" href="/assets/css/main.css?v=0.12.1">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  </head>
  <body class="template-bookmarklet ">
    <div class="page is-flex is-flex-direction-column">
      <header class="page-header">
        <nav class="navbar is-primary" role="navigation" aria-label="main navigation">
          <div class="navbar-brand">
            <a class="home-item navbar-item" href="/">
              <svg class="home-item__icon icon" aria-hidden="true"><use href="/assets/img/icons.svg?v=0.12.1#mdi-bookmark-multiple"></use></svg>
              <span class="home-item__text is-family-secondary pr-4">Bookmarklets</span>
            </a>

            <button type="button" class="navbar-burger" aria-label="Menu" aria-expanded="false" data-target="menu">
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
            </button>
          </div>

          <div id="menu" class="navbar-menu">
            <div class="navbar-end">
              <div class="navbar-item">
                <div class="buttons">
                  <a class="button is-secondary" href="https://github.com/hampusn/bookmarklets#readme">
                    <svg class="icon" aria-hidden="true"><use href="/assets/img/icons.svg?v=0.12.1#mdi-github"></use></svg>
                    <strong>Github</strong>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </nav>
      </header><!--! .page-header -->

      <main class="page-main is-flex-grow-1 ">
        

        <div class="section">
  <div class="container is-max-desktop">
    <div class="content">
      <h1 class="is-family-secondary">Sitevision navigation</h1><div class="message is-info">
          <div class="message-body">
            <svg class="icon icon--large" aria-hidden="true"><use href="/assets/img/icons.svg?v=0.12.1#mdi-information-slab-circle"></use></svg>
            <strong>Sitevision navigation</strong> has been discontinued. Try <a href="/sitevision-inspector/">Sitevision inspector</a> instead.
          </div>
        </div><p>This bookmarklet will let you navigate to the direct children of the current page on a website built with Sitevision. Useful when there is no menu or when the pages are hidden. When there are no direct sub pages (type <code>sv:page</code>) but at least one folder (type <code>sv:folder</code>), the folder's sub pages will be listed instead.</p>

    </div>
  </div>
</div>

<div class="section has-background-light">
  <div class="container is-max-desktop">
    <dl class="block is-flex-desktop is-flex-wrap-wrap is-justify-content-center">
      <div class="is-flex mx-3 my-1">
        <dt class="has-text-weight-semibold mr-2">Created</dt>
        <dd>2023-01-08</dd>
      </div>

      

      <div class="is-flex mx-3 my-1">
        <dt class="has-text-weight-semibold mr-2">Bookmarklet size</dt>
        <dd>3.35 kB</dd>
      </div>
    </dl>

    <div class="has-text-centered-desktop my-6">
      <p class="is-size-5 mb-2">Drag this link to your bookmarks to save it.</p>
      <a class="bookmarklet-button button is-link is-medium" href="javascript:!function()%7B%22use%20strict%22%3B((t%2Ce%2Cn)%3D%3E%7Bconst%20o%3D%22sitevision-navigation-dialog%22%2Cs%3D%22env-modal-dialog%22%2Ci%3D%22sv%3Apage%22%2C%7Borigin%3Aa%7D%3Dt.location%2C%7BpageId%3Ar%7D%3Dt.sv%3F.PageContext%7C%7C%7B%7D%2Cl%3DencodeURIComponent(JSON.stringify(%7Bincludes%3A%5Bi%2C%22sv%3Afolder%22%5D%2Cproperties%3A%5B%22URI%22%5D%7D))%2Cd%3D%7Bheaders%3A%7B%22Content-Type%22%3A%22application%2Fjson%22%2CAccept%3A%22application%2Fjson%22%7D%7D%2Cc%3De.getElementById(o)%3Bc%26%26c.parentNode.removeChild(c)%3Bconst%20u%3Dasync%20t%3D%3E%7Btry%7Bconst%20r%3D%60%24%7Ba%7D%2Frest-api%2F1%2F1%2F%24%7Bt%7D%2Fnodes%3Fformat%3Djson%26json%3D%24%7Bl%7D%60%2Cc%3Dawait%20fetch(r%2Cd)%2Cg%3D%7BnodeId%3At%2Cstatus%3Ac.status%2CstatusText%3Ac.statusText%2Curl%3Ar%2C_response%3Ac%7D%3Bif(!c.ok)%7Bif(console.error(g)%2C401%3D%3D%3Dc.status)throw%22Missing%20authentication.%20Are%20you%20logged%20in%3F%22%3Bthrow%60Something%20went%20wrong.%20Status%20%24%7Bc.status%7D%60%7Dconst%20h%3Dawait%20c.json()%3Bif(!Array.isArray(h)%7C%7C0%3D%3D%3Dh.length)throw%20console.error(%7Bresult%3Ah%2C...g%7D)%2C%22No%20results%20found.%22%3Bif(0%3D%3D%3Dh.filter(((%7Btype%3At%7D)%3D%3Et%3D%3D%3Di)).length)return%20void%20u(h%5B0%5D.id)%3Bconst%20v%3D%60%3Cdiv%20id%3D%22%24%7Bo%7D%22%20class%3D%22%24%7Bs%7D%20%24%7Bs%7D--inner-scroll%22%20role%3D%22dialog%22%20aria-modal%3D%22true%22%20aria-labelledby%3D%22%24%7Bo%7D-heading%22%20aria-hidden%3D%22true%22%20tabindex%3D%22-1%22%3E%5Cn%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22%24%7Bs%7D__dialog%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%3Csection%20class%3D%22%24%7Bs%7D__content%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cheader%20class%3D%22%24%7Bs%7D__header%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch5%20class%3D%22env-text%20%24%7Bs%7D__header__title%22%20id%3D%22%24%7Bo%7D-heading%22%3ESub%20pages%3C%2Fh5%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fheader%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22%24%7Bs%7D__body%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cul%20class%3D%22env-list%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24%7Bh.filter(((%7Btype%3At%7D)%3D%3Et%3D%3D%3Di)).map((t%3D%3E%60%3Cli%20class%3D%22env-list__item%22%3E%3Ca%20class%3D%22env-button%20env-button--link%22%20href%3D%22%24%7Bt.properties.URI%7D%22%3E%24%7Bt.name%7D%3C%2Fa%3E%3C%2Fli%3E%60)).join(%22%22)%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Ful%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cfooter%20class%3D%22%24%7Bs%7D__footer%20%24%7Bs%7D__footer--right%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20type%3D%22button%22%20data-modal-dialog-dismiss%20class%3D%22env-button%22%3EClose%3C%2Fbutton%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Ffooter%3E%5Cn%20%20%20%20%20%20%20%20%20%20%3C%2Fsection%3E%5Cn%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%20%20%3C%2Fdiv%3E%60%3Be.body.insertAdjacentHTML(%22beforeend%22%2Cv)%2Cn.dialog(%22%23%22%2Bo).then((function(t)%7Bt%5B0%5D.show()%7D))%7Dcatch(t)%7Bconsole.error(t)%2Ce.dispatchEvent(new%20CustomEvent(%22sv-publish-toast%22%2C%7Bdetail%3A%7Bheading%3A%22Error!%22%2Cmessage%3AString(t)%7D%7D))%7D%7D%3Bu(r)%7D)(window%2Cdocument%2Cenvision)%7D()%3B">
        <svg class="bookmarklet__icon bookmarklet__icon icon" aria-hidden="true"><use href="/assets/img/icons.svg?v=0.12.1#mdi-bookmark"></use></svg>
        <svg class="bookmarklet__icon bookmarklet__icon--error icon" aria-hidden="true"><use href="/assets/img/icons.svg?v=0.12.1#mdi-block-helper"></use></svg>
        <svg class="bookmarklet__icon bookmarklet__icon--success icon" aria-hidden="true"><use href="/assets/img/icons.svg?v=0.12.1#mdi-check-bold"></use></svg>
        <span>Sitevision navigation</span>
      </a>
    </div>

    <div class="mt-6">
      <h2 class="is-size-4 is-family-secondary">Bookmarklet code</h2><div class="mb-6">
          <h3 class="is-size-5">sitevision-navigation</h3>
          <pre class="language-js"><code class="language-js"><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">window<span class="token punctuation">,</span> document<span class="token punctuation">,</span> envision</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token constant">DIALOG_ID</span> <span class="token operator">=</span> <span class="token string">'sitevision-navigation-dialog'</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token constant">CLASS_BASE</span> <span class="token operator">=</span> <span class="token string">'env-modal-dialog'</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token constant">TYPE_PAGE</span> <span class="token operator">=</span> <span class="token string">'sv:page'</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token constant">TYPE_FOLDER</span> <span class="token operator">=</span> <span class="token string">'sv:folder'</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span> origin <span class="token punctuation">}</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span> pageId <span class="token punctuation">}</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>sv<span class="token operator">?.</span>PageContext <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> apiParams <span class="token operator">=</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    <span class="token literal-property property">includes</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token constant">TYPE_PAGE</span><span class="token punctuation">,</span> <span class="token constant">TYPE_FOLDER</span> <span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"URI"</span> <span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> fetchOpts <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span><br>      <span class="token string-property property">'Accept'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// Remove dialog if already in DOM</span><br>  <span class="token keyword">const</span> dialog <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token constant">DIALOG_ID</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>dialog<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    dialog<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>dialog<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// Main code. Fetch from Rest API and output as envision modal dialog.</span><br>  <span class="token keyword">const</span> <span class="token function-variable function">run</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">nodeId</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">try</span> <span class="token punctuation">{</span><br>      <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>origin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/rest-api/1/1/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nodeId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/nodes?format=json&amp;json=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>apiParams<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> fetchOpts<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">const</span> debugObj <span class="token operator">=</span> <span class="token punctuation">{</span><br>        nodeId<span class="token punctuation">,</span><br>        <span class="token literal-property property">status</span><span class="token operator">:</span> response<span class="token punctuation">.</span>status<span class="token punctuation">,</span><br>        <span class="token literal-property property">statusText</span><span class="token operator">:</span> response<span class="token punctuation">.</span>statusText<span class="token punctuation">,</span><br>        url<span class="token punctuation">,</span> <span class="token literal-property property">_response</span><span class="token operator">:</span> response<br>      <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>      <span class="token comment">// Someting went wrong. Throw error.</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>debugObj<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">throw</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Missing authentication. Are you logged in?</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">throw</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Something went wrong. Status </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>response<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>      <span class="token comment">// Empty result. Throw error.</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">||</span> result<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span> result<span class="token punctuation">,</span> <span class="token operator">...</span>debugObj <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">throw</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">No results found.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token comment">// No pages in result means we only got folder(s). Use first folder and rerun.</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> type <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> type <span class="token operator">===</span> <span class="token constant">TYPE_PAGE</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token function">run</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">return</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token comment">// Build dialog markup.</span><br>      <span class="token keyword">const</span> dialogHTML <span class="token operator">=</span><br>      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">DIALOG_ID</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">--inner-scroll" role="dialog" aria-modal="true" aria-labelledby="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">DIALOG_ID</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-heading" aria-hidden="true" tabindex="-1"><br>        &lt;div class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__dialog"><br>          &lt;section class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__content"><br>            &lt;header class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__header"><br>              &lt;h5 class="env-text </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__header__title" id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">DIALOG_ID</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-heading">Sub pages&lt;/h5><br>            &lt;/header><br>            &lt;div class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__body">            <br>              &lt;ul class="env-list"><br>                </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> type <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> type <span class="token operator">===</span> <span class="token constant">TYPE_PAGE</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span><br>                  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li class="env-list__item">&lt;a class="env-button env-button--link" href="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token constant">URI</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/a>&lt;/li></span><span class="token template-punctuation string">`</span></span><br>                <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>              &lt;/ul><br>            &lt;/div><br>            &lt;footer class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__footer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__footer--right"><br>              &lt;button type="button" data-modal-dialog-dismiss class="env-button">Close&lt;/button><br>            &lt;/footer><br>          &lt;/section><br>        &lt;/div><br>      &lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>      <span class="token comment">// Insert dialog into end of body and show dialog with envision.</span><br>      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">'beforeend'</span><span class="token punctuation">,</span> dialogHTML<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      envision<span class="token punctuation">.</span><span class="token function">dialog</span><span class="token punctuation">(</span><span class="token string">'#'</span> <span class="token operator">+</span> <span class="token constant">DIALOG_ID</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">dialogs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        dialogs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// Log and show a toast message with error.</span><br>      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      document<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span><span class="token string">'sv-publish-toast'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br>        <span class="token literal-property property">detail</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>          <span class="token literal-property property">heading</span><span class="token operator">:</span> <span class="token string">'Error!'</span><span class="token punctuation">,</span><br>          <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token punctuation">}</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// Run logic.</span><br>  <span class="token function">run</span><span class="token punctuation">(</span>pageId<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> document<span class="token punctuation">,</span> envision<span class="token punctuation">)</span></code></pre>
        </div></div>
  </div>
</div>

      </main><!--! .page-main -->

      <footer class="page-footer section has-background-secondary-dark has-text-white py-5">
        <div class="container">
          <p class="has-text-centered">
            <a class="page-footer__link has-text-white" href="https://github.com/hampusn/bookmarklets#readme">
              <strong>bookmarklets</strong>
              <svg class="icon" aria-label="External link"><use href="/assets/img/icons.svg?v=0.12.1#mdi-open-in-new"></use></svg>
            </a>
            is created by
            <a class="page-footer__link has-text-white" href="https://hampus.io/">
              <strong>Hampus Nordin</strong>
              <svg class="icon" aria-label="External link"><use href="/assets/img/icons.svg?v=0.12.1#mdi-open-in-new"></use></svg>
            </a>
          </p>
        </div>
      </footer><!--! .page-footer -->
    </div><!--! .page -->

    <div id="bookmarklet-drag" class="bookmarklet-drag"></div>
    <script type="module" src="/assets/js/main.js?v=0.12.1"></script>
    <!-- Current page: /sitevision-navigation/ -->
  </body>
</html>
