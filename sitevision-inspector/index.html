<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sitevision inspector</title>
    <meta name="description" content="View data about the currently viewed page.">
    <link rel="stylesheet" href="/assets/css/main.css?v=0.12.1">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  </head>
  <body class="template-bookmarklet ">
    <div class="page is-flex is-flex-direction-column">
      <header class="page-header">
        <nav class="navbar is-primary" role="navigation" aria-label="main navigation">
          <div class="navbar-brand">
            <a class="home-item navbar-item" href="/">
              <svg class="home-item__icon icon" aria-hidden="true"><use href="/assets/img/icons.svg?v=0.12.1#mdi-bookmark-multiple"></use></svg>
              <span class="home-item__text is-family-secondary pr-4">Bookmarklets</span>
            </a>

            <button type="button" class="navbar-burger" aria-label="Menu" aria-expanded="false" data-target="menu">
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
            </button>
          </div>

          <div id="menu" class="navbar-menu">
            <div class="navbar-end">
              <div class="navbar-item">
                <div class="buttons">
                  <a class="button is-secondary" href="https://github.com/hampusn/bookmarklets#readme">
                    <svg class="icon" aria-hidden="true"><use href="/assets/img/icons.svg?v=0.12.1#mdi-github"></use></svg>
                    <strong>Github</strong>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </nav>
      </header><!--! .page-header -->

      <main class="page-main is-flex-grow-1 ">
        

        <div class="section">
  <div class="container is-max-desktop">
    <div class="content">
      <h1 class="is-family-secondary">Sitevision inspector</h1><p>With this bookmarklet, you can easily read properties, nodes, headless data and search index from the currently viewed page. Useful when developing and debugging.</p>

    </div>
  </div>
</div>

<div class="section has-background-light">
  <div class="container is-max-desktop">
    <dl class="block is-flex-desktop is-flex-wrap-wrap is-justify-content-center">
      <div class="is-flex mx-3 my-1">
        <dt class="has-text-weight-semibold mr-2">Created</dt>
        <dd>2023-04-24</dd>
      </div>

      
        <div class="is-flex mx-3 my-1">
          <dt class="has-text-weight-semibold mr-2">Updated</dt>
          <dd>2025-03-19</dd>
        </div>
      

      <div class="is-flex mx-3 my-1">
        <dt class="has-text-weight-semibold mr-2">Bookmarklet size</dt>
        <dd>26.1 kB</dd>
      </div>
    </dl>

    <div class="has-text-centered-desktop my-6">
      <p class="is-size-5 mb-2">Drag this link to your bookmarks to save it.</p>
      <a class="bookmarklet-button button is-link is-medium" href="javascript:!function()%7B%22use%20strict%22%3Bvar%20t%3D%7BPAGE%3A%22sv%3Apage%22%2CFOLDER%3A%22sv%3Afolder%22%2CARCHIVE%3A%22sv%3Aarchive%22%2CARTICLE%3A%22sv%3Aarticle%22%2CLINK%3A%22sv%3Alink%22%2CGROUP_PAGE%3A%22sv%3AcollaborationGroupPage%22%2CGROUP_FOLDER%3A%22sv%3AcollaborationGroupFolder%22%7D%3Bvar%20e%3D%7BARTICLE%3A&#39;%3Csvg%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M18.984%203h-13.969q-0.844%200-1.43%200.586t-0.586%201.43v13.969q0%200.844%200.586%201.43t1.43%200.586h13.969q0.844%200%201.43-0.586t0.586-1.43v-13.969q0-0.844-0.586-1.43t-1.43-0.586zM14.016%2017.016h-7.031v-2.016h7.031v2.016zM17.016%2012.984h-10.031v-1.969h10.031v1.969zM17.016%209h-10.031v-2.016h10.031v2.016z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E&#39;%2CBACK%3A&#39;%3Csvg%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M8.016%2013.031l3.984-4.031%203.984%204.031-1.406%201.406-1.594-1.594v4.172h-1.969v-4.172l-1.594%201.594zM20.016%2018v-9.984h-16.031v9.984h16.031zM20.016%206q0.797%200%201.383%200.609t0.586%201.406v9.984q0%200.797-0.586%201.406t-1.383%200.609h-16.031q-0.797%200-1.383-0.609t-0.586-1.406v-12q0-0.797%200.586-1.406t1.383-0.609h6l2.016%202.016h8.016z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E&#39;%2CFOLDER%3A&#39;%3Csvg%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M9.984%203.984l2.016%202.016h8.016q0.797%200%201.383%200.609t0.586%201.406v9.984q0%200.797-0.586%201.406t-1.383%200.609h-16.031q-0.797%200-1.383-0.609t-0.586-1.406v-12q0-0.797%200.586-1.406t1.383-0.609h6z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E&#39;%2CPAGE%3A&#39;%3Csvg%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12.984%209h5.531l-5.531-5.484v5.484zM6%202.016h8.016l6%206v12q0%200.797-0.609%201.383t-1.406%200.586h-12q-0.797%200-1.406-0.586t-0.609-1.383l0.047-16.031q0-0.797%200.586-1.383t1.383-0.586z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E&#39;%2CARCHIVE%3A&#39;%3Csvg%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M15%2015.984h6v3q0%200.797-0.609%201.406t-1.406%200.609h-13.969q-0.797%200-1.406-0.609t-0.609-1.406v-3h6q0%201.219%200.891%202.109t2.109%200.891%202.109-0.891%200.891-2.109zM18.984%209v-3.984h-13.969v3.984h3.984q0%201.219%200.891%202.109t2.109%200.891%202.109-0.891%200.891-2.109h3.984zM18.984%203q0.797%200%201.406%200.609t0.609%201.406v6.984q0%200.797-0.609%201.406t-1.406%200.609h-13.969q-0.797%200-1.406-0.609t-0.609-1.406v-6.984q0-0.797%200.609-1.406t1.406-0.609h13.969z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E&#39;%2CLINK%3A&#39;%3Csvg%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M17.016%206.984q2.063%200%203.516%201.477t1.453%203.539-1.453%203.539-3.516%201.477h-4.031v-1.922h4.031q1.266%200%202.18-0.914t0.914-2.18-0.914-2.18-2.18-0.914h-4.031v-1.922h4.031zM8.016%2012.984v-1.969h7.969v1.969h-7.969zM3.891%2012q0%201.266%200.914%202.18t2.18%200.914h4.031v1.922h-4.031q-2.063%200-3.516-1.477t-1.453-3.539%201.453-3.539%203.516-1.477h4.031v1.922h-4.031q-1.266%200-2.18%200.914t-0.914%202.18z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E&#39;%2CGROUP_PAGE%3A&#39;%3Csvg%20id%3D%22icon-contact_page%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M14.016%202.016h-8.016q-0.844%200-1.43%200.586t-0.586%201.383v16.031q0%200.797%200.586%201.383t1.43%200.586h12q0.844%200%201.43-0.586t0.586-1.383v-12zM12%209.984q0.844%200%201.43%200.586t0.586%201.43-0.586%201.43-1.43%200.586-1.43-0.586-0.586-1.43%200.586-1.43%201.43-0.586zM15.984%2018h-7.969v-0.563q0-0.609%200.328-1.125t0.891-0.75q0.609-0.281%201.313-0.422t1.453-0.141%201.453%200.141%201.313%200.422q0.563%200.234%200.891%200.75t0.328%201.125v0.563z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E&#39;%2CGROUP_FOLDER%3A&#39;%3Csvg%20id%3D%22icon-folder_shared%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M18.984%2017.016v-1.031q0-0.891-1.383-1.43t-2.602-0.539-2.602%200.539-1.383%201.43v1.031h7.969zM15%209q-0.797%200-1.406%200.609t-0.609%201.406%200.609%201.383%201.406%200.586%201.406-0.586%200.609-1.383-0.609-1.406-1.406-0.609zM20.016%206q0.797%200%201.383%200.609t0.586%201.406v9.984q0%200.797-0.586%201.406t-1.383%200.609h-16.031q-0.797%200-1.383-0.609t-0.586-1.406v-12q0-0.797%200.586-1.406t1.383-0.609h6l2.016%202.016h8.016z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E&#39;%2CEDIT%3A&#39;%3Csvg%20id%3D%22icon-pencil%22%20viewBox%3D%220%200%2032%2032%22%3E%3Cpath%20d%3D%22M27%200c2.761%200%205%202.239%205%205%200%201.126-0.372%202.164-1%203l-2%202-7-7%202-2c0.836-0.628%201.874-1%203-1zM2%2023l-2%209%209-2%2018.5-18.5-7-7-18.5%2018.5zM22.362%2011.362l-14%2014-1.724-1.724%2014-14%201.724%201.724z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E&#39;%7D%3Bconst%20i%3D%7B%5Bt.ARCHIVE%5D%3Ae.ARCHIVE%2C%5Bt.FOLDER%5D%3Ae.FOLDER%2C%5Bt.PAGE%5D%3Ae.PAGE%2C%5Bt.ARTICLE%5D%3Ae.ARTICLE%2C%5Bt.LINK%5D%3Ae.LINK%2C%5Bt.GROUP_PAGE%5D%3Ae.GROUP_PAGE%2C%5Bt.GROUP_FOLDER%5D%3Ae.GROUP_FOLDER%2Cback%3Ae.BACK%7D%3Bclass%20n%7Bconstructor(t%3D%7B%7D)%7Bthis.emptyText%3D%22No%20data%20found%22%2Cthis.caption%3D%22%22%2Cthis.headings%3D%5B%22Property%22%2C%22Value%22%5D%2Cthis.data%3Dnull%2Cthis.applyOpts(t)%7DapplyOpts(t)%7Bt.emptyText%26%26(this.emptyText%3Dt.emptyText)%2Ct.caption%26%26(this.caption%3Dt.caption)%2Ct.headings%26%26(this.headings%3Dt.headings)%7DsetData(t)%7Breturn%20this.data%3Dt%2Cthis%7DsilentStringify(t)%7Btry%7Breturn%20JSON.stringify(t%2Cnull%2C2)%7Dcatch(t)%7B%7Dreturn%22%22%7Dsanitize(t)%7Bconst%20e%3D%7B%22%26%22%3A%22%26amp%3B%22%2C%22%3C%22%3A%22%26lt%3B%22%2C%22%3E%22%3A%22%26gt%3B%22%2C&#39;%22&#39;%3A%22%26quot%3B%22%2C%22&#39;%22%3A%22%26%2339%3B%22%2C%22%2F%22%3A%22%26%23x2F%3B%22%2C%22%EF%80%BA%22%3A%22%3A%22%2C%22%EF%80%AF%22%3A%22%2F%22%7D%3Breturn%20t%3FString(t).replace(%2F%5B%26%3C%3E%22&#39;%2F%5CuF03A%5CuF02F%5D%2Fg%2C(t%3D%3Ee%5Bt%5D))%3A%22%22%7Drender()%7Breturn%22%22%7D%7Dvar%20s%3D%7BTableFormatter%3Aclass%20extends%20n%7Brender()%7Bconst%20t%3Dthis.data%2Ce%3Dthis.silentStringify(t)%2Ci%3Dthis.sanitize%3Bif(!e%7C%7C%22%7B%7D%22%3D%3D%3De)return%20this.emptyText%3Bconst%20n%3DArray.isArray(t)%3Ft%3AObject.entries(t)%2Cs%3D%22function%22%3D%3Dtypeof%20this.caption%3Fthis.caption.call(null%2Ct)%3Athis.caption%2C%5Ba%2Co%5D%3Dthis.headings%3Breturn%60%3Ctable%20class%3D%22env-table%20env-table--zebra%20env-table--small%20env-w--100%22%3E%5Cn%20%20%20%20%20%20%3Ccaption%20class%3D%22env-assistive-text%22%3E%24%7Bi(s)%7D%3C%2Fcaption%3E%5Cn%20%20%20%20%20%20%3Cthead%3E%5Cn%20%20%20%20%20%20%20%20%3Ctr%3E%3Cth%3E%24%7Ba%7D%3C%2Fth%3E%3Cth%3E%24%7Bo%7D%3C%2Fth%3E%3C%2Ftr%3E%5Cn%20%20%20%20%20%20%3C%2Fthead%3E%5Cn%20%20%20%20%20%20%3Ctbody%3E%5Cn%20%20%20%20%20%20%20%20%24%7Bn.map(((%5Bt%2Ce%5D)%3D%3E%60%3Ctr%20data-filter-item%3E%3Ctd%20style%3D%22white-space%3Anowrap%22%3E%24%7Bi(t)%7D%3C%2Ftd%3E%3Ctd%3E%24%7Bi(e)%7D%3C%2Ftd%3E%3C%2Ftr%3E%60)).join(%22%22)%7D%5Cn%20%20%20%20%20%20%3C%2Ftbody%3E%5Cn%20%20%20%20%3C%2Ftable%3E%60%7D%7D%2CListFormatter%3Aclass%20extends%20n%7Bicon(t)%7Breturn%20i%5Bt%5D%3FString(i%5Bt%5D).replace(%22%3Csvg%20%22%2C&#39;%3Csvg%20class%3D%22env-icon%20env-icon--small%20env-m-right--small%22%20&#39;)%3A%22%22%7Drender()%7Bconst%20e%3Dthis.data%2Ci%3Dthis.sanitize%2Cn%3Dthis.icon%3Breturn%20Array.isArray(e)%26%260!%3D%3De.length%3F%60%3Cul%20class%3D%22env-nav%20env-nav--sidenav%22%3E%5Cn%20%20%20%20%20%20%20%20%24%7Be.map((e%3D%3E%60%3Cli%20class%3D%22env-nav__item%22%20data-filter-item%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24%7B%5Bt.PAGE%2Ct.ARTICLE%2Ct.LINK%2Ct.GROUP_PAGE%5D.includes(e.type)%3F%60%3Ca%20class%3D%22env-nav__link%20env-d--flex%22%20href%3D%22%24%7Bi(e.properties.URI)%7D%22%3E%24%7Bn(e.type)%7D%24%7Bi(e.name)%7D%3C%2Fa%3E%60%3A%60%3Cbutton%20class%3D%22env-nav__link%20env-button%20env-button--link%20env-w--100%22%20style%3D%22justify-content%3Astart%3Bdisplay%3Aflex%3Bborder-radius%3A0%3B%22%20data-node-id%3D%22%24%7Bi(e.id)%7D%22%3E%24%7Bn(e.type)%7D%24%7Bi(e.name)%7D%3C%2Fbutton%3E%60%7D%5Cn%20%20%20%20%20%20%20%20%20%20%3C%2Fli%3E%60)).join(%22%22)%7D%5Cn%20%20%20%20%20%20%3C%2Ful%3E%60%3Athis.emptyText%7D%7D%2CJsonFormatter%3Aclass%20extends%20n%7Brender()%7Bconst%20t%3Dthis.silentStringify(this.data)%3Breturn%20t%26%26%22%7B%7D%22!%3D%3Dt%3F%60%3Cpre%20style%3D%22background-color%3Avar(--env-ui-color-brand-10)%3Bcolor%3Avar(--env-ui-color-brand-10-contrast)%3Boverflow%3Ascroll%3Bpadding%3A1em%3B%22%3E%3Ccode%3E%24%7Bt%7D%3C%2Fcode%3E%3C%2Fpre%3E%60%3Athis.emptyText%7D%7D%7D%3Bconst%20a%3D%22click%22%2Co%3D(t%2Ce%2Ci)%3D%3Et.addEventListener(e%2Ci)%3Bvar%20r%3D(t%2Ce)%3D%3Eo(t%2Ca%2Ce)%2Cd%3D(t%2Ce)%3D%3E((t%2Ce%2Ci)%3D%3Et.removeEventListener(e%2Ci))(t%2Ca%2Ce)%2Cl%3D(t%2Ce)%3D%3Eo(t%2C%22change%22%2Ce)%2Ch%3D(t%2Ce)%3D%3Eo(t%2C%22input%22%2Ce)%2Cc%3D(t%2Ce)%3D%3Eo(t%2C%22keydown%22%2Ce)%2Cv%3D(t%2Ce)%3D%3Eo(t%2C%22paste%22%2Ce)%3Bconst%20u%3D%22env-modal-dialog%22%2Cp%3D%22env-button--primary%22%2Cg%3D%22env-spinner-bounce%22%2Cf%3Dwindow.document%2Cm%3Dwindow.envision%3Bclass%20y%7Bconstructor(%7BdialogId%3At%2CnodeId%3Ae%2Cviews%3Ai%3D%5B%5D%7D)%7Bthis.id%3Dt%2Cthis.nodeId%3De%2Cthis.views%3Di%2Cthis.current%3D0%2Cthis.isLoading%3D!1%2Cthis.version%3D1%2Cthis.tid%3Dt%2B%22-t%22%2Cthis.cid%3Dt%2B%22-c%22%2Cthis.ctxid%3Dt%2B%22-ctx%22%2Cthis.bid%3Dt%2B%22-b%22%2Cthis.bgid%3Dt%2B%22-bg%22%2Cthis.fid%3Dt%2B%22-f%22%2Cthis.lid%3Dt%2B%22-l%22%2Cthis.sfid%3Dt%2B%22-sf%22%2Cthis.siid%3Dt%2B%22-si%22%2Cthis.views.forEach((t%3D%3Et.setDialog(this)))%7Del(t)%7Breturn%20f.getElementById(t)%7Dinit()%7Bconst%20t%3Dthis.id%2Ci%3Dthis.tid%2Cn%3Dthis.siid%3Bif(this.el(t))return%20this%3Bf.body.insertAdjacentHTML(%22beforeend%22%2C%60%3Cdiv%20id%3D%22%24%7Bt%7D%22%20class%3D%22%24%7Bu%7D%20%24%7Bu%7D--inner-scroll%22%20style%3D%22z-index%3A99999%22%20role%3D%22dialog%22%20aria-modal%3D%22true%22%20aria-labelledby%3D%22%24%7Bi%7D%22%20aria-hidden%3D%22true%22%20tabindex%3D%22-1%22%3E%5Cn%20%20%20%20%20%20%3Cdiv%20class%3D%22%24%7Bu%7D__dialog%20%24%7Bu%7D__dialog--large%22%3E%5Cn%20%20%20%20%20%20%20%20%3Csection%20class%3D%22%24%7Bu%7D__content%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%3Cheader%20class%3D%22%24%7Bu%7D__header%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Ch5%20id%3D%22%24%7Bi%7D%22%20class%3D%22env-text%20env-d--flex%20env-flex--align-items-center%20env-flex--justify-content-between%20%24%7Bu%7D__header__title%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20Sitevision%20inspector%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22%24%7Bthis.lid%7D%22%20class%3D%22%24%7Bg%7D%20%24%7Bg%7D--hide%20%24%7Bg%7D--fade-in%22%20data-delay%3D%22medium%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24%7B%5B1%2C2%2C3%5D.map((t%3D%3E%60%3Cdiv%20class%3D%22env-bounce%24%7Bt%7D%22%3E%3C%2Fdiv%3E%60)).join(%22%22)%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fh5%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22%24%7Bthis.ctxid%7D%22%20class%3D%22env-m-top--small%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22env-form-element%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22env-form-element__control%20env-form-input-group%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%20for%3D%22%24%7Bthis.ctxid%7D-f%22%20class%3D%22env-form-input-group__label%22%20style%3D%22flex-shrink%3A0%22%3EID%3C%2Flabel%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20class%3D%22env-form-input%22%20id%3D%22%24%7Bthis.ctxid%7D-f%22%20readonly%20value%3D%22%24%7Bthis.nodeId%7D%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20data-ctx-action%3D%22edit%22%20type%3D%22button%22%20class%3D%22env-button%20env-button--primary%20env-button--icon%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Edit%20context%20node%20id%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24%7Be.EDIT.replace(%22%3Csvg%22%2C&#39;%3Csvg%20style%3D%22pointer-events%3Anone%22%20class%3D%22env-icon%22&#39;)%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20data-ctx-action%3D%22save%22%20type%3D%22button%22%20class%3D%22env-d--none%20env-button%20env-button--success%20env-button--icon%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Change%20context%20node%20id%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Csvg%20style%3D%22pointer-events%3Anone%22%20class%3D%22env-icon%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cuse%20href%3D%22%2Fsitevision%2Fenvision-icons.svg%23icon-check-line%22%3E%3C%2Fuse%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fsvg%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20data-ctx-action%3D%22cancel%22%20type%3D%22button%22%20class%3D%22env-d--none%20env-button%20env-button--ghost%20env-button--danger%20env-button--icon%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Cancel%20change%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Csvg%20style%3D%22pointer-events%3Anone%22%20class%3D%22env-icon%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cuse%20href%3D%22%2Fsitevision%2Fenvision-icons.svg%23icon-delete%22%3E%3C%2Fuse%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fsvg%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22%24%7Bthis.bgid%7D%22%20class%3D%22env-button-group%20env-m-top--small%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24%7Bthis.views.map(((t%2Ce)%3D%3E%60%3Cbutton%20id%3D%22%24%7Bthis.bid%2Be%7D%22%20type%3D%22button%22%20class%3D%22env-button%20env-flex__item--grow-1%22%20data-view-index%3D%22%24%7Be%7D%22%3E%24%7Bt.name%7D%3C%2Fbutton%3E%60)).join(%22%22)%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%20%20%20%20%20%20%3C%2Fheader%3E%5Cn%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22%24%7Bu%7D__body%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22%24%7Bthis.sfid%7D%22%20class%3D%22env-form-element%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%20for%3D%22%24%7Bn%7D%22%20class%3D%22env-form-element__label%22%3EFilter%20query%3C%2Flabel%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22env-form-element__control%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type%3D%22search%22%20class%3D%22env-form-input%20env-form-input--search%22%20id%3D%22%24%7Bn%7D%22%20%2F%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22%24%7Bthis.cid%7D%22%3EView%20properties%2C%20nodes%20and%20headless%20data%20with%20the%20buttons%20above.%3C%2Fdiv%3E%5Cn%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%20%20%20%20%20%20%3Cfooter%20id%3D%22%24%7Bthis.fid%7D%22%20class%3D%22%24%7Bu%7D__footer%20env-d--flex%20env-flex--justify-content-between%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cfieldset%20class%3D%22env-form-element__control%20env-d--flex%20env-flex--align-items-center%22%20style%3D%22gap%3A%20var(--env-spacing-medium)%3B%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Clegend%20class%3D%22env-form-element__label%20env-m-bottom--0%22%20style%3D%22float%3A%20left%3B%20font-weight%3A%20700%3B%22%3EVersion%3A%3C%2Flegend%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%20class%3D%22env-radio%20env-m-bottom--0%22%3E%3Cinput%20type%3D%22radio%22%20name%3D%22version%22%20value%3D%221%22%20checked%3EOnline%20(Public)%3C%2Flabel%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%20class%3D%22env-radio%20env-m-bottom--0%22%3E%3Cinput%20type%3D%22radio%22%20name%3D%22version%22%20value%3D%220%22%3EOffline%20(Edit)%3C%2Flabel%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Ffieldset%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20type%3D%22button%22%20data-modal-dialog-dismiss%20class%3D%22env-button%22%3EClose%3C%2Fbutton%3E%5Cn%20%20%20%20%20%20%20%20%20%20%3C%2Ffooter%3E%5Cn%20%20%20%20%20%20%20%20%3C%2Fsection%3E%5Cn%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%3C%2Fdiv%3E%60)%3Bconst%20s%3Dasync%20t%3D%3E%7Bconst%20e%3Dthis.current%2Ci%3Dt%3D%3D%3De%3Bthis.setLoading(!0)%2Ci%7C%7Cthis.el(this.bid%2Be).classList.remove(p)%2Cawait%20this.detach()%2Cthis.current%3Dt%2Cawait%20this.fetch()%2Cthis.render()%2Cawait%20this.attach()%2Ci%7C%7Cthis.el(this.bid%2Bthis.current).classList.add(p)%2Cthis.setLoading(!1)%7D%2Ca%3Dthis.el(this.ctxid)%2Co%3Da.querySelector(%22input%22)%2Cd%3Da.querySelectorAll(&#39;%5Bdata-ctx-action%3D%22save%22%5D%2C%20%5Bdata-ctx-action%3D%22cancel%22%5D&#39;)%2Cm%3Da.querySelectorAll(&#39;%5Bdata-ctx-action%3D%22edit%22%5D&#39;)%2Cy%3Dasync()%3D%3Eawait%20s(this.current)%2Cb%3Dt%3D%3E%7Bthis.el(this.ctxid).querySelector(%22.env-form-input-group%22).append(...t)%2Ct.forEach((t%3D%3Et.classList.remove(%22env-d--none%22)))%7D%2Cw%3Dt%3D%3E%7Bthis.el(this.ctxid).append(...t)%2Ct.forEach((t%3D%3Et.classList.add(%22env-d--none%22)))%7D%2Cx%3D()%3D%3E!1%3D%3D%3Do.readOnly%2C_%3Dasync()%3D%3E%7Bthis.setNodeId(o.value)%2Cw(d)%2Cb(m)%2Co.readOnly%3D!0%2Cawait%20y()%7D%2CI%3D()%3D%3E%7Bw(d)%2Cb(m)%2Co.value%3Dthis.nodeId%2Co.readOnly%3D!0%7D%3Breturn%20r(this.el(this.ctxid)%2C(async%20t%3D%3E%7Bif(!this.isLoading%26%26%2F%5Ebutton%24%2Fi.test(t.target.tagName))%7Bswitch(t.target.dataset.ctxAction)%7Bcase%22edit%22%3Ab(d)%2Cw(m)%2Co.readOnly%3D!1%2Co.focus()%2Co.setSelectionRange(0%2Co.value.length)%3Bbreak%3Bcase%22save%22%3Aawait%20_()%3Bbreak%3Bcase%22cancel%22%3AI()%7D%7D%7D))%2Cc(a%2C(async%20t%3D%3E%7B%22Escape%22%3D%3D%3Dt.key%26%26x()%3F(t.stopImmediatePropagation()%2CI())%3A%22Enter%22%3D%3D%3Dt.key%26%26t.target%3D%3D%3Do%26%26(t.stopImmediatePropagation()%2Cawait%20_())%7D))%2Cv(o%2C(async%20t%3D%3E%7Bif(x())%7Bconst%20e%3Dt.clipboardData.getData(%22text%2Fplain%22)%2Ci%3D%2F%5Esvid(%5B0-9%5D%7B1%2C3%7D)_(%5Ba-z0-9_%5D%2B)%24%2Fi.exec(e)%3Bif(i)%7Bt.preventDefault()%3Bconst%5Be%2Cn%2Cs%5D%3Di%3Bo.value%3D%60%24%7Bn%7D.%24%7Bs%7D%60%7D%7D%7D))%2Cr(this.el(this.bgid)%2C(async%20t%3D%3E%7B!this.isLoading%26%26%2F%5Ebutton%24%2Fi.test(t.target.tagName)%26%26await%20s(parseInt(t.target.dataset.viewIndex%2C10))%7D))%2Ch(this.el(this.siid)%2C(t%3D%3E%7Bthis.applyFilter(t.target.value)%7D))%2Cc(this.el(this.siid)%2C(t%3D%3E%7B%22Escape%22%3D%3D%3Dt.key%26%26t.target.value%26%26t.stopImmediatePropagation()%7D))%2Cl(this.el(this.fid)%2C(async%20t%3D%3E%7Bthis.version%3DparseInt(t.target.value%2C10)%2Cawait%20s(parseInt(this.el(this.bid%2Bthis.current).dataset.viewIndex%2C10))%7D))%2Cthis%7DsetNodeId(t)%7Bthis.nodeId%3DString(t).trim()%2Cthis.el(%60%24%7Bthis.ctxid%7D-f%60).value%3Dthis.nodeId%7DupdateContent(t)%7Bthis.el(this.cid).innerHTML%3Dt%7Dasync%20attach()%7Bconst%20t%3Dthis.views%5Bthis.current%5D%3Bawait%20t.attach.call(t)%7Dasync%20detach()%7Bconst%20t%3Dthis.views%5Bthis.current%5D%3Bawait%20t.detach.call(t)%7DsetLoading(t)%7Bthis.isLoading%3D!!t%2Cthis.el(this.lid).classList%5Bthis.isLoading%3F%22remove%22%3A%22add%22%5D(%60%24%7Bg%7D--hide%60)%7Dasync%20fetch()%7Bconst%20t%3Dthis.views%5Bthis.current%5D%2Ce%3Dawait%20t.fetchData.call(t)%3Bt.setData(e)%7DapplyFilter(t)%7Bconst%20e%3Dthis.views%5Bthis.current%5D.getIndex()%3Bif(!e)return%3Bconst%20i%3D(t%3F%3Fthis.el(this.siid).value).toLowerCase()%3Bthis.el(this.cid).querySelectorAll(%22%5Bdata-filter-item%5D%22).forEach(((t%2Cn)%3D%3E%7Bt.style.display%3Di%26%26!e%5Bn%5D.includes(i)%3F%22none%22%3A%22%22%7D))%7Drender()%7Bconst%20t%3Dthis.views%5Bthis.current%5D%2Ce%3Dt.render.call(t)%3Be%26%26(this.updateContent(e)%2Cthis.applyFilter())%2Cthis.el(this.sfid).style.display%3Dt.getIndex()%3F%22%22%3A%22none%22%7DrenderError(t)%7Bthis.updateContent(%60%3Cdiv%20class%3D%22env-alert%20env-alert--danger%22%3E%24%7Bt%7D%3C%2Fdiv%3E%60)%7Dtoggle(t)%7Breturn%20m.dialog(%22%23%22%2Bthis.id%2C%22toggle%22).then(t)%2Cthis%7D%7Dclass%20b%7Bconstructor(t%2Ce%3D%7B%7D)%7Bthis.name%3Dt%2Cthis.dialog%3Dnull%2Cthis._formatter%3Dnull%2Cthis._fetch%3Dnull%2Cthis._attach%3Dnull%2Cthis._detach%3Dnull%2Cthis._onUpdateIndex%3Dnull%2Cthis._data%3Dnull%2Cthis._index%3Dnull%2Cthis.config%3De%7DsetDialog(t)%7Breturn%20this.dialog%3Dt%2Cthis%7DsetData(t)%7Bthis._data%3Dt%2Cthis.buildIndex(t)%7DgetIndex()%7Breturn%20this._index%7DbuildIndex(t)%7B%22function%22%3D%3Dtypeof%20this._buildIndex%26%26(this._index%3Dthis._buildIndex.call(this%2Ct)%3F.map((t%3D%3Et.toLowerCase())))%7Dasync%20fetchData(...t)%7Btry%7Bif(%22function%22%3D%3Dtypeof%20this._fetch)return%20await%20this._fetch.call(this%2C...t)%7Dcatch(t)%7Bthis.dialog.renderError(String(t))%7Dreturn!1%7Dasync%20attach()%7Btry%7B%22function%22%3D%3Dtypeof%20this._attach%26%26await%20this._attach.call(this)%7Dcatch(t)%7Bthis.dialog.renderError(String(t))%7D%7Dasync%20detach()%7Btry%7B%22function%22%3D%3Dtypeof%20this._detach%26%26await%20this._detach.call(this)%7Dcatch(t)%7Bthis.dialog.renderError(String(t))%7D%7Drender()%7Breturn%20this._formatter%20instanceof%20n%26%26this._data%3Fthis._formatter.setData(this._data).render()%3A%22%22%7Dformatter(t)%7Breturn%20this._formatter%3Dt%2Cthis%7DonBuildIndex(t)%7Breturn%20this._buildIndex%3Dt%2Cthis%7DonFetchData(t)%7Breturn%20this._fetch%3Dt%2Cthis%7DonAttach(t)%7Breturn%20this._attach%3Dt%2Cthis%7DonDetach(t)%7Breturn%20this._detach%3Dt%2Cthis%7D%7Dconst%20w%3D0%2Cx%3D1%3Basync%20function%20_(%7BnodeId%3At%2Cpath%3Ae%2CsiteName%3Ai%2Cversion%3An%3Dx%2CapiMethod%3As%3D%22nodes%22%2Coptions%3Aa%3D%7B%7D%2Corigin%3Ao%3Dwindow.location.origin%2CreturnError%3Ar%3D!1%7D)%7Bif(!(t%7C%7Ce%26%26i))throw%22Api%20needs%20either%20a%20nodeId%20or%20a%20path.%22%3Bconst%20d%3DencodeURIComponent(JSON.stringify(a))%2Cl%3D%7Bheaders%3A%7B%22Content-Type%22%3A%22application%2Fjson%22%2CAccept%3A%22application%2Fjson%22%7D%7D%2Ch%3D%5Bw%2Cx%5D.includes(n)%3Fn%3Ax%2Cc%3D%60%24%7Bo%7D%2Frest-api%2F1%2F%24%7Bh%7D%2F%24%7Bt%7C%7Ci%2B%22%2F%22%2Be.replace(%2F%5E%5C%2F%7C%5C%2F%24%2F%2C%22%22)%7D%2F%24%7Bs%7D%3Fformat%3Djson%26json%3D%24%7Bd%7D%60%3Blet%20v%3Bh%3D%3D%3Dw%26%26(l.credentials%3D%22same-origin%22)%3Blet%20u%3D%7B%7D%3Btry%7Bv%3Dawait%20fetch(c%2Cl)%2Cu%3Dawait%20v.json()%7Dcatch(p)%7Bv%3D%7Bok%3A!1%2Cstatus%3Av.status%7D%2Cu%3D%7Bmessage%3AString(p)%7D%7Dlet%20p%3Dnull%3Bif(!v.ok%26%26(p%3D%5B%60Status%20%24%7Bv.status%7D%60%2Cu%3F.description%2Cu%3F.message%5D.filter((t%3D%3E!!t)).join(%22%2C%20%22)%2C!r))throw%20p%3Breturn%20r%3F%5Bu%2Cp%5D%3Au%7D(e%3D%3E%7Bconst%7BpageId%3Ai%2CsiteId%3An%7D%3De.sv%3F.PageContext%7C%7C%7B%7D%3Bif(!e.envision)return%20void%20console.warn(%22Envision%20not%20found.%20Exiting%20since%20most%20likely%20not%20Sitevision.%22)%3Blet%20a%3Bconst%20o%3D%22back%22%3Bnew%20y(%7BnodeId%3Ai%2CdialogId%3A%22sitevision-inspector-dialog%22%2Cviews%3A%5Bnew%20b(%22Properties%22).onFetchData((async%20function()%7Breturn%20await%20_(%7BnodeId%3Athis.dialog.nodeId%2Cversion%3Athis.dialog.version%2CapiMethod%3A%22properties%22%7D)%7D)).onBuildIndex((function(t)%7Breturn%20null%3D%3D%3Dt%7C%7C%22object%22!%3Dtypeof%20t%7C%7CArray.isArray(t)%7C%7C0%3D%3D%3DObject.keys(t).length%3Fnull%3A%5B...Object.entries(t)%5D.map(((%5Bt%2Ce%5D)%3D%3Et%2B%22%20%22%2Be))%7D)).formatter(new%20s.TableFormatter(%7Bcaption%3At%3D%3E%60Properties%20for%20%24%7Bt.articleName%7C%7Ct.displayName%7D%60%7D))%2Cnew%20b(%22Nodes%22%2C%7Bbreadcrumbs%3A%5B%5D%7D).onFetchData((async%20function(e%3Dnull)%7Be%3F%3F%3Dthis.dialog.nodeId%3Bconst%20i%3D%7Bincludes%3AObject.values(t)%2Cproperties%3A%5B%22URI%22%5D%7D%2Cn%3Dawait%20_(%7BnodeId%3Ae%2Cversion%3Athis.dialog.version%2CapiMethod%3A%22nodes%22%2Coptions%3Ai%7D)%3Breturn%20this.config.breadcrumbs.length%3E1%26%26n%5B0%5D%3F.id!%3D%3Do%26%26n.unshift(%7Btype%3Ao%2Cid%3Ao%2Cname%3A%22Go%20back%22%7D)%2Cn%7D)).onBuildIndex((function(t)%7Breturn%20Array.isArray(t)%3Ft.map((t%3D%3Et.name))%3Anull%7D)).formatter(new%20s.ListFormatter(%7BemptyText%3A%22No%20nodes%20found%22%7D)).onAttach((async%20function()%7Bconst%20t%3Dthis.dialog%3B0%3D%3D%3Dthis.config.breadcrumbs.length%26%26(this.config.breadcrumbs%3D%5Bt.nodeId%5D)%2Cthis.onClick%3Dasync%20e%3D%3E%7Bconst%20i%3De.target%3Bif(!this.isLoading%26%26%2F%5Ebutton%24%2Fi.test(i.tagName))%7Blet%20e%3Di.dataset.nodeId%3Be%3D%3D%3Do%3Fthis.config.breadcrumbs.pop()%3Athis.config.breadcrumbs.push(e)%2Ce%3Dthis.config.breadcrumbs%5Bthis.config.breadcrumbs.length-1%5D%2Ct.setNodeId(e)%2Ct.setLoading(!0)%3Bconst%20n%3Dawait%20this.fetchData()%3Bthis.setData(n)%2Ct.render()%2Ct.setLoading(!1)%7D%7D%2Cr(t.el(t.cid)%2Cthis.onClick)%7D)).onDetach((async%20function()%7Bconst%20t%3Dthis.dialog%3Bd(t.el(t.cid)%2Cthis.onClick)%7D))%2Cnew%20b(%22Headless%22).onFetchData((async%20function()%7Breturn%20await%20_(%7BnodeId%3Athis.dialog.nodeId%2Cversion%3Athis.dialog.version%2CapiMethod%3A%22headless%22%7D)%7D)).formatter(new%20s.JsonFormatter)%2Cnew%20b(%22Search%20index%22).onFetchData((async%20function()%7Bif(!a)%7Bconst%20t%3Dawait%20_(%7BnodeId%3An%2Cversion%3Athis.dialog.version%2CapiMethod%3A%22properties%22%7D)%3Bif(!t%3F.displayName)throw%22Could%20not%20read%20site%20name.%22%3Ba%3Dt.displayName%7Dconst%20t%3Dawait%20_(%7Bpath%3A%22Index%20Repository%2FOnline%22%2CsiteName%3Aa%2Cversion%3Athis.dialog.version%2CapiMethod%3A%22search%22%2Coptions%3A%7Bquery%3A%60%2Bid%3A%24%7Bthis.dialog.nodeId%7D%60%2Climit%3A1%2Cfields%3A%5B%22*%22%2C%22nodeid%22%5D%7D%7D)%3Bif(0%3D%3D%3Dt.length)throw%22No%20indexed%20data%20found%20for%20current%20page.%22%3Breturn%20Object.entries(t%5B0%5D).reduce(((t%2C%5Be%2Ci%5D)%3D%3E%7Bif(Array.isArray(i))for(const%20n%20of%20i)t.push(%5Be%2Cn%5D)%3Belse%20t.push(%5Be%2Ci%5D)%3Breturn%20t%7D)%2C%5B%5D)%7D)).onBuildIndex((function(t)%7Breturn%20Array.isArray(t)%3Ft.map(((%5Bt%2Ce%5D)%3D%3Et%2B%22%20%22%2Be))%3Anull%7D)).formatter(new%20s.TableFormatter(%7Bheadings%3A%5B%22Field%22%2C%22Value%22%5D%7D))%5D%7D).init().toggle()%7D)(window)%7D()%3B">
        <svg class="bookmarklet__icon bookmarklet__icon icon" aria-hidden="true"><use href="/assets/img/icons.svg?v=0.12.1#mdi-bookmark"></use></svg>
        <svg class="bookmarklet__icon bookmarklet__icon--error icon" aria-hidden="true"><use href="/assets/img/icons.svg?v=0.12.1#mdi-block-helper"></use></svg>
        <svg class="bookmarklet__icon bookmarklet__icon--success icon" aria-hidden="true"><use href="/assets/img/icons.svg?v=0.12.1#mdi-check-bold"></use></svg>
        <span>Sitevision inspector</span>
      </a>
    </div>

    <div class="mt-6">
      <h2 class="is-size-4 is-family-secondary">Bookmarklet code</h2><div class="mb-6">
          <h3 class="is-size-5">sitevision-inspector</h3>
          <pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> Dialog<span class="token punctuation">,</span> DialogView <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Dialog'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> Formatters <span class="token keyword">from</span> <span class="token string">'./Formatters'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> NodeTypes <span class="token keyword">from</span> <span class="token string">'./NodeTypes'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> sitevisionApi <span class="token keyword">from</span> <span class="token string">'../../_lib/shared/sitevision-api'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> Events <span class="token keyword">from</span> <span class="token string">'../../_lib/shared/Events'</span><span class="token punctuation">;</span><br><br><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">window</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">pageId</span><span class="token operator">:</span> nodeId<span class="token punctuation">,</span> siteId <span class="token punctuation">}</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>sv<span class="token operator">?.</span>PageContext <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// Bail early if envision is not found.</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>envision<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'Envision not found. Exiting since most likely not Sitevision.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">let</span> __siteName<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token constant">BACK</span> <span class="token operator">=</span> <span class="token string">'back'</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">new</span> <span class="token class-name">Dialog</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    nodeId<span class="token punctuation">,</span><br>    <span class="token literal-property property">dialogId</span><span class="token operator">:</span> <span class="token string">'sitevision-inspector-dialog'</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">views</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>      <span class="token comment">// Properties view</span><br>      <span class="token keyword">new</span> <span class="token class-name">DialogView</span><span class="token punctuation">(</span><span class="token string">'Properties'</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">onFetchData</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">sitevisionApi</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">nodeId</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">.</span>nodeId<span class="token punctuation">,</span> <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token literal-property property">apiMethod</span><span class="token operator">:</span> <span class="token string">'properties'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">onBuildIndex</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> data <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">||</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><br><br>          <span class="token keyword">return</span> <span class="token punctuation">[</span> <span class="token operator">...</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span> property<span class="token punctuation">,</span> value <span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> property <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">formatter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Formatters<span class="token punctuation">.</span>TableFormatter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function-variable function">caption</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Properties for </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>articleName <span class="token operator">||</span> data<span class="token punctuation">.</span>displayName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <br>      <span class="token comment">// Nodes view</span><br>      <span class="token keyword">new</span> <span class="token class-name">DialogView</span><span class="token punctuation">(</span><span class="token string">'Nodes'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br>        <span class="token literal-property property">breadcrumbs</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">onFetchData</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          id <span class="token operator">??=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">.</span>nodeId<span class="token punctuation">;</span><br><br>          <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><br>            <span class="token literal-property property">includes</span><span class="token operator">:</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>NodeTypes<span class="token punctuation">)</span><span class="token punctuation">,</span><br>            <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'URI'</span> <span class="token punctuation">]</span><br>          <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>          <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sitevisionApi</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">nodeId</span><span class="token operator">:</span> id<span class="token punctuation">,</span> <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token literal-property property">apiMethod</span><span class="token operator">:</span> <span class="token string">'nodes'</span><span class="token punctuation">,</span> options <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>breadcrumbs<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">?.</span>id <span class="token operator">!==</span> <span class="token constant">BACK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            data<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>              <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">BACK</span><span class="token punctuation">,</span><br>              <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token constant">BACK</span><span class="token punctuation">,</span><br>              <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Go back'</span><span class="token punctuation">,</span><br>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><br><br>          <span class="token keyword">return</span> data<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">onBuildIndex</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><br><br>          <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token operator">=></span> node<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">formatter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Formatters<span class="token punctuation">.</span>ListFormatter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">emptyText</span><span class="token operator">:</span> <span class="token string">'No nodes found'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">onAttach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">const</span> dialog <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">;</span><br><br>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>breadcrumbs<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>breadcrumbs <span class="token operator">=</span> <span class="token punctuation">[</span> dialog<span class="token punctuation">.</span>nodeId <span class="token punctuation">]</span><span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><br><br>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">onClick</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>            <span class="token keyword">const</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">;</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isLoading <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^button$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>tagName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>              <span class="token keyword">let</span> id <span class="token operator">=</span> target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>nodeId<span class="token punctuation">;</span><br><br>              <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">===</span> <span class="token constant">BACK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>breadcrumbs<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>                <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>breadcrumbs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><br>              <span class="token punctuation">}</span><br>              <br>              id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>breadcrumbs<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>breadcrumbs<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>              dialog<span class="token punctuation">.</span><span class="token function">setNodeId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>              dialog<span class="token punctuation">.</span><span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>              <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>              dialog<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>              dialog<span class="token punctuation">.</span><span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>          <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>          Events<span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span>dialog<span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span>dialog<span class="token punctuation">.</span>cid<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onClick<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">onDetach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">const</span> dialog <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">;</span><br>          Events<span class="token punctuation">.</span><span class="token function">offClick</span><span class="token punctuation">(</span>dialog<span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span>dialog<span class="token punctuation">.</span>cid<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onClick<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br><br>      <span class="token comment">// Headless view</span><br>      <span class="token keyword">new</span> <span class="token class-name">DialogView</span><span class="token punctuation">(</span><span class="token string">'Headless'</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">onFetchData</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">sitevisionApi</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">nodeId</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">.</span>nodeId<span class="token punctuation">,</span> <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token literal-property property">apiMethod</span><span class="token operator">:</span> <span class="token string">'headless'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">formatter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Formatters<span class="token punctuation">.</span>JsonFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br><br>      <span class="token keyword">new</span> <span class="token class-name">DialogView</span><span class="token punctuation">(</span><span class="token string">'Search index'</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">onFetchData</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>__siteName<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">const</span> siteProps <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sitevisionApi</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">nodeId</span><span class="token operator">:</span> siteId<span class="token punctuation">,</span> <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token literal-property property">apiMethod</span><span class="token operator">:</span> <span class="token string">'properties'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>siteProps<span class="token operator">?.</span>displayName<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>              __siteName <span class="token operator">=</span> siteProps<span class="token punctuation">.</span>displayName<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>              <span class="token keyword">throw</span> <span class="token string">'Could not read site name.'</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>          <span class="token punctuation">}</span><br><br>          <span class="token keyword">const</span> searchResult <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sitevisionApi</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'Index Repository/Online'</span><span class="token punctuation">,</span> <span class="token literal-property property">siteName</span><span class="token operator">:</span> __siteName<span class="token punctuation">,</span> <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token literal-property property">apiMethod</span><span class="token operator">:</span> <span class="token string">'search'</span><span class="token punctuation">,</span> <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>            <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">+id:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">.</span>nodeId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>            <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br>            <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token string">'nodeid'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>          <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>          <span class="token keyword">if</span> <span class="token punctuation">(</span>searchResult<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">throw</span> <span class="token string">'No indexed data found for current page.'</span><span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><br><br>          <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>searchResult<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>              <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> v <span class="token keyword">of</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                acc<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>key<span class="token punctuation">,</span> v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>              <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>              acc<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br><br>            <span class="token keyword">return</span> acc<span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">onBuildIndex</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><br><br>          <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span> property<span class="token punctuation">,</span> value <span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> property <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">formatter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Formatters<span class="token punctuation">.</span>TableFormatter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">headings</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'Field'</span><span class="token punctuation">,</span> <span class="token string">'Value'</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span></code></pre>
        </div><div class="mb-6">
          <h3 class="is-size-5">NodeTypes.js</h3>
          <pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">PAGE</span> <span class="token operator">=</span> <span class="token string">'sv:page'</span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">FOLDER</span> <span class="token operator">=</span> <span class="token string">'sv:folder'</span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">ARCHIVE</span> <span class="token operator">=</span> <span class="token string">'sv:archive'</span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">ARTICLE</span> <span class="token operator">=</span> <span class="token string">'sv:article'</span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">LINK</span> <span class="token operator">=</span> <span class="token string">'sv:link'</span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">GROUP_PAGE</span> <span class="token operator">=</span> <span class="token string">'sv:collaborationGroupPage'</span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">GROUP_FOLDER</span> <span class="token operator">=</span> <span class="token string">'sv:collaborationGroupFolder'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><br>  <span class="token constant">PAGE</span><span class="token punctuation">,</span><br>  <span class="token constant">FOLDER</span><span class="token punctuation">,</span><br>  <span class="token constant">ARCHIVE</span><span class="token punctuation">,</span><br>  <span class="token constant">ARTICLE</span><span class="token punctuation">,</span><br>  <span class="token constant">LINK</span><span class="token punctuation">,</span><br>  <span class="token constant">GROUP_PAGE</span><span class="token punctuation">,</span><br>  <span class="token constant">GROUP_FOLDER</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
        </div><div class="mb-6">
          <h3 class="is-size-5">Icons.js</h3>
          <pre class="language-js"><code class="language-js"><span class="token comment">// Icons from Material Design. Generated by IcoMoon.io</span><br><span class="token keyword">const</span> <span class="token constant">ARTICLE</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg width="24" height="24" viewBox="0 0 24 24">&lt;path d="M18.984 3h-13.969q-0.844 0-1.43 0.586t-0.586 1.43v13.969q0 0.844 0.586 1.43t1.43 0.586h13.969q0.844 0 1.43-0.586t0.586-1.43v-13.969q0-0.844-0.586-1.43t-1.43-0.586zM14.016 17.016h-7.031v-2.016h7.031v2.016zM17.016 12.984h-10.031v-1.969h10.031v1.969zM17.016 9h-10.031v-2.016h10.031v2.016z">&lt;/path>&lt;/svg></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">BACK</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg width="24" height="24" viewBox="0 0 24 24">&lt;path d="M8.016 13.031l3.984-4.031 3.984 4.031-1.406 1.406-1.594-1.594v4.172h-1.969v-4.172l-1.594 1.594zM20.016 18v-9.984h-16.031v9.984h16.031zM20.016 6q0.797 0 1.383 0.609t0.586 1.406v9.984q0 0.797-0.586 1.406t-1.383 0.609h-16.031q-0.797 0-1.383-0.609t-0.586-1.406v-12q0-0.797 0.586-1.406t1.383-0.609h6l2.016 2.016h8.016z">&lt;/path>&lt;/svg></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">FOLDER</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg width="24" height="24" viewBox="0 0 24 24">&lt;path d="M9.984 3.984l2.016 2.016h8.016q0.797 0 1.383 0.609t0.586 1.406v9.984q0 0.797-0.586 1.406t-1.383 0.609h-16.031q-0.797 0-1.383-0.609t-0.586-1.406v-12q0-0.797 0.586-1.406t1.383-0.609h6z">&lt;/path>&lt;/svg></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">PAGE</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg width="24" height="24" viewBox="0 0 24 24">&lt;path d="M12.984 9h5.531l-5.531-5.484v5.484zM6 2.016h8.016l6 6v12q0 0.797-0.609 1.383t-1.406 0.586h-12q-0.797 0-1.406-0.586t-0.609-1.383l0.047-16.031q0-0.797 0.586-1.383t1.383-0.586z">&lt;/path>&lt;/svg></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">ARCHIVE</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg width="24" height="24" viewBox="0 0 24 24">&lt;path d="M15 15.984h6v3q0 0.797-0.609 1.406t-1.406 0.609h-13.969q-0.797 0-1.406-0.609t-0.609-1.406v-3h6q0 1.219 0.891 2.109t2.109 0.891 2.109-0.891 0.891-2.109zM18.984 9v-3.984h-13.969v3.984h3.984q0 1.219 0.891 2.109t2.109 0.891 2.109-0.891 0.891-2.109h3.984zM18.984 3q0.797 0 1.406 0.609t0.609 1.406v6.984q0 0.797-0.609 1.406t-1.406 0.609h-13.969q-0.797 0-1.406-0.609t-0.609-1.406v-6.984q0-0.797 0.609-1.406t1.406-0.609h13.969z">&lt;/path>&lt;/svg></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">LINK</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg width="24" height="24" viewBox="0 0 24 24">&lt;path d="M17.016 6.984q2.063 0 3.516 1.477t1.453 3.539-1.453 3.539-3.516 1.477h-4.031v-1.922h4.031q1.266 0 2.18-0.914t0.914-2.18-0.914-2.18-2.18-0.914h-4.031v-1.922h4.031zM8.016 12.984v-1.969h7.969v1.969h-7.969zM3.891 12q0 1.266 0.914 2.18t2.18 0.914h4.031v1.922h-4.031q-2.063 0-3.516-1.477t-1.453-3.539 1.453-3.539 3.516-1.477h4.031v1.922h-4.031q-1.266 0-2.18 0.914t-0.914 2.18z">&lt;/path>&lt;/svg></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">GROUP_PAGE</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg id="icon-contact_page" viewBox="0 0 24 24">&lt;path d="M14.016 2.016h-8.016q-0.844 0-1.43 0.586t-0.586 1.383v16.031q0 0.797 0.586 1.383t1.43 0.586h12q0.844 0 1.43-0.586t0.586-1.383v-12zM12 9.984q0.844 0 1.43 0.586t0.586 1.43-0.586 1.43-1.43 0.586-1.43-0.586-0.586-1.43 0.586-1.43 1.43-0.586zM15.984 18h-7.969v-0.563q0-0.609 0.328-1.125t0.891-0.75q0.609-0.281 1.313-0.422t1.453-0.141 1.453 0.141 1.313 0.422q0.563 0.234 0.891 0.75t0.328 1.125v0.563z">&lt;/path>&lt;/svg></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">GROUP_FOLDER</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg id="icon-folder_shared" viewBox="0 0 24 24">&lt;path d="M18.984 17.016v-1.031q0-0.891-1.383-1.43t-2.602-0.539-2.602 0.539-1.383 1.43v1.031h7.969zM15 9q-0.797 0-1.406 0.609t-0.609 1.406 0.609 1.383 1.406 0.586 1.406-0.586 0.609-1.383-0.609-1.406-1.406-0.609zM20.016 6q0.797 0 1.383 0.609t0.586 1.406v9.984q0 0.797-0.586 1.406t-1.383 0.609h-16.031q-0.797 0-1.383-0.609t-0.586-1.406v-12q0-0.797 0.586-1.406t1.383-0.609h6l2.016 2.016h8.016z">&lt;/path>&lt;/svg></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">EDIT</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg id="icon-pencil" viewBox="0 0 32 32">&lt;path d="M27 0c2.761 0 5 2.239 5 5 0 1.126-0.372 2.164-1 3l-2 2-7-7 2-2c0.836-0.628 1.874-1 3-1zM2 23l-2 9 9-2 18.5-18.5-7-7-18.5 18.5zM22.362 11.362l-14 14-1.724-1.724 14-14 1.724 1.724z">&lt;/path>&lt;/svg></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><br>  <span class="token constant">ARTICLE</span><span class="token punctuation">,</span><br>  <span class="token constant">BACK</span><span class="token punctuation">,</span><br>  <span class="token constant">FOLDER</span><span class="token punctuation">,</span><br>  <span class="token constant">PAGE</span><span class="token punctuation">,</span><br>  <span class="token constant">ARCHIVE</span><span class="token punctuation">,</span><br>  <span class="token constant">LINK</span><span class="token punctuation">,</span><br>  <span class="token constant">GROUP_PAGE</span><span class="token punctuation">,</span><br>  <span class="token constant">GROUP_FOLDER</span><span class="token punctuation">,</span><br>  <span class="token constant">EDIT</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
        </div><div class="mb-6">
          <h3 class="is-size-5">Formatters.js</h3>
          <pre class="language-js"><code class="language-js"><span class="token keyword">import</span> NodeTypes <span class="token keyword">from</span> <span class="token string">'./NodeTypes'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> Icons <span class="token keyword">from</span> <span class="token string">'./Icons'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token constant">ICONS_DICT</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token punctuation">[</span>NodeTypes<span class="token punctuation">.</span><span class="token constant">ARCHIVE</span><span class="token punctuation">]</span><span class="token operator">:</span> Icons<span class="token punctuation">.</span><span class="token constant">ARCHIVE</span><span class="token punctuation">,</span><br>  <span class="token punctuation">[</span>NodeTypes<span class="token punctuation">.</span><span class="token constant">FOLDER</span><span class="token punctuation">]</span><span class="token operator">:</span> Icons<span class="token punctuation">.</span><span class="token constant">FOLDER</span><span class="token punctuation">,</span><br>  <span class="token punctuation">[</span>NodeTypes<span class="token punctuation">.</span><span class="token constant">PAGE</span><span class="token punctuation">]</span><span class="token operator">:</span> Icons<span class="token punctuation">.</span><span class="token constant">PAGE</span><span class="token punctuation">,</span><br>  <span class="token punctuation">[</span>NodeTypes<span class="token punctuation">.</span><span class="token constant">ARTICLE</span><span class="token punctuation">]</span><span class="token operator">:</span> Icons<span class="token punctuation">.</span><span class="token constant">ARTICLE</span><span class="token punctuation">,</span><br>  <span class="token punctuation">[</span>NodeTypes<span class="token punctuation">.</span><span class="token constant">LINK</span><span class="token punctuation">]</span><span class="token operator">:</span> Icons<span class="token punctuation">.</span><span class="token constant">LINK</span><span class="token punctuation">,</span><br>  <span class="token punctuation">[</span>NodeTypes<span class="token punctuation">.</span><span class="token constant">GROUP_PAGE</span><span class="token punctuation">]</span><span class="token operator">:</span> Icons<span class="token punctuation">.</span><span class="token constant">GROUP_PAGE</span><span class="token punctuation">,</span><br>  <span class="token punctuation">[</span>NodeTypes<span class="token punctuation">.</span><span class="token constant">GROUP_FOLDER</span><span class="token punctuation">]</span><span class="token operator">:</span> Icons<span class="token punctuation">.</span><span class="token constant">GROUP_FOLDER</span><span class="token punctuation">,</span><br>  <span class="token string-property property">'back'</span><span class="token operator">:</span> Icons<span class="token punctuation">.</span><span class="token constant">BACK</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Formatter</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">opts <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>emptyText <span class="token operator">=</span> <span class="token string">'No data found'</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>caption <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>headings <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Property'</span><span class="token punctuation">,</span> <span class="token string">'Value'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">applyOpts</span><span class="token punctuation">(</span>opts<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">applyOpts</span> <span class="token punctuation">(</span><span class="token parameter">opts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>emptyText<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>emptyText <span class="token operator">=</span> opts<span class="token punctuation">.</span>emptyText<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>caption<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>caption <span class="token operator">=</span> opts<span class="token punctuation">.</span>caption<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>headings<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>headings <span class="token operator">=</span> opts<span class="token punctuation">.</span>headings<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">setData</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">silentStringify</span> <span class="token punctuation">(</span><span class="token parameter">mixed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">try</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>mixed<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><br>    <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">sanitize</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> dict <span class="token operator">=</span> <span class="token punctuation">{</span><br>      <span class="token string-property property">'&amp;'</span><span class="token operator">:</span> <span class="token string">'&amp;amp;'</span><span class="token punctuation">,</span><br>      <span class="token string-property property">'&lt;'</span><span class="token operator">:</span> <span class="token string">'&amp;lt;'</span><span class="token punctuation">,</span><br>      <span class="token string-property property">'>'</span><span class="token operator">:</span> <span class="token string">'&amp;gt;'</span><span class="token punctuation">,</span><br>      <span class="token string-property property">'"'</span><span class="token operator">:</span> <span class="token string">'&amp;quot;'</span><span class="token punctuation">,</span><br>      <span class="token string-property property">"'"</span><span class="token operator">:</span> <span class="token string">'&amp;#39;'</span><span class="token punctuation">,</span><br>      <span class="token string-property property">'/'</span><span class="token operator">:</span> <span class="token string">'&amp;#x2F;'</span><span class="token punctuation">,</span><br>      <span class="token comment">// Fix for characters in Unicode Private Use Area</span><br>      <span class="token string-property property">'\uF03A'</span><span class="token operator">:</span> <span class="token string">':'</span><span class="token punctuation">,</span><br>      <span class="token string-property property">'\uF02F'</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> str <span class="token operator">?</span> <span class="token function">String</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[&amp;&lt;>"'/\uF03A\uF02F]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span> <span class="token operator">=></span> dict<span class="token punctuation">[</span>match<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">TableFormatter</span> <span class="token keyword">extends</span> <span class="token class-name">Formatter</span> <span class="token punctuation">{</span><br>  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">;</span><br>    <span class="token keyword">const</span> dataStr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">silentStringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sanitize<span class="token punctuation">;</span><br>    <br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dataStr <span class="token operator">||</span> dataStr <span class="token operator">===</span> <span class="token string">'{}'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>emptyText<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <br>    <span class="token keyword">const</span> rows <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">?</span> data <span class="token operator">:</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> caption <span class="token operator">=</span> <span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>caption <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">caption</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>caption<span class="token punctuation">;</span><br>    <span class="token keyword">const</span> <span class="token punctuation">[</span> keyHeading<span class="token punctuation">,</span> valueHeading <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>headings<span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;table class="env-table env-table--zebra env-table--small env-w--100"><br>      &lt;caption class="env-assistive-text"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">s</span><span class="token punctuation">(</span>caption<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/caption><br>      &lt;thead><br>        &lt;tr>&lt;th></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>keyHeading<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/th>&lt;th></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>valueHeading<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/th>&lt;/tr><br>      &lt;/thead><br>      &lt;tbody><br>        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>rows<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span> key<span class="token punctuation">,</span> value <span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span><br>          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;tr data-filter-item>&lt;td style="white-space:nowrap"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">s</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/td>&lt;td></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">s</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/td>&lt;/tr></span><span class="token template-punctuation string">`</span></span><br>        <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>      &lt;/tbody><br>    &lt;/table></span><span class="token template-punctuation string">`</span></span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ListFormatter</span> <span class="token keyword">extends</span> <span class="token class-name">Formatter</span> <span class="token punctuation">{</span><br>  <span class="token function">icon</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token constant">ICONS_DICT</span><span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token constant">ICONS_DICT</span><span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'&lt;svg '</span><span class="token punctuation">,</span> <span class="token string">'&lt;svg class="env-icon env-icon--small env-m-right--small" '</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">;</span><br>    <span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sanitize<span class="token punctuation">;</span><br>    <span class="token keyword">const</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>icon<span class="token punctuation">;</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">||</span> data<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>emptyText<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;ul class="env-nav env-nav--sidenav"><br>        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span><br>          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li class="env-nav__item" data-filter-item><br>            </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">[</span>NodeTypes<span class="token punctuation">.</span><span class="token constant">PAGE</span><span class="token punctuation">,</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">ARTICLE</span><span class="token punctuation">,</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">LINK</span><span class="token punctuation">,</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">GROUP_PAGE</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token operator">?</span><br>              <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;a class="env-nav__link env-d--flex" href="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">s</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token constant">URI</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">i</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">s</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/a></span><span class="token template-punctuation string">`</span></span><br>            <span class="token operator">:</span><br>              <span class="token comment">// Envision does not yet have utility class for justify-content: start;</span><br>              <span class="token comment">// env-d--flex does not override display of env-button in older SV versions so we need to inline display flex.</span><br>              <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;button class="env-nav__link env-button env-button--link env-w--100" style="justify-content:start;display:flex;border-radius:0;" data-node-id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">s</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">i</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">s</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/button></span><span class="token template-punctuation string">`</span></span><br>            <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>          &lt;/li></span><span class="token template-punctuation string">`</span></span><br>        <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>      &lt;/ul></span><span class="token template-punctuation string">`</span></span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">JsonFormatter</span> <span class="token keyword">extends</span> <span class="token class-name">Formatter</span> <span class="token punctuation">{</span><br>  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> formattedData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">silentStringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>formattedData <span class="token operator">||</span> formattedData <span class="token operator">===</span> <span class="token string">'{}'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>emptyText<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;pre style="background-color:var(--env-ui-color-brand-10);color:var(--env-ui-color-brand-10-contrast);overflow:scroll;padding:1em;">&lt;code></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>formattedData<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/code>&lt;/pre></span><span class="token template-punctuation string">`</span></span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><br>  TableFormatter<span class="token punctuation">,</span><br>  ListFormatter<span class="token punctuation">,</span><br>  JsonFormatter<span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
        </div><div class="mb-6">
          <h3 class="is-size-5">Events.js</h3>
          <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token constant">CLICK</span> <span class="token operator">=</span> <span class="token string">'click'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">CHANGE</span> <span class="token operator">=</span> <span class="token string">'change'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">INPUT</span> <span class="token operator">=</span> <span class="token string">'input'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">KEYDOWN</span> <span class="token operator">=</span> <span class="token string">'keydown'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">SUBMIT</span> <span class="token operator">=</span> <span class="token string">'submit'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">PASTE</span> <span class="token operator">=</span> <span class="token string">'paste'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> event<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=></span> el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> event<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=></span> el<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><br>  <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">add</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token constant">CLICK</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token function-variable function">offClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">remove</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token constant">CLICK</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token function-variable function">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">add</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token constant">CHANGE</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token function-variable function">onInput</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">add</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token constant">INPUT</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token function-variable function">onKeydown</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">add</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token constant">KEYDOWN</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token function-variable function">onSubmit</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">add</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token constant">SUBMIT</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token function-variable function">onPaste</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">add</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token constant">PASTE</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
        </div><div class="mb-6">
          <h3 class="is-size-5">Dialog.js</h3>
          <pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> Formatter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Formatters'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> Events <span class="token keyword">from</span> <span class="token string">'../../_lib/shared/Events'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> Icons <span class="token keyword">from</span> <span class="token string">'./Icons'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token constant">CLASS_BASE</span> <span class="token operator">=</span> <span class="token string">'env-modal-dialog'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">ACTIVE_CLASS</span> <span class="token operator">=</span> <span class="token string">'env-button--primary'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">SPINNER_CLASS</span> <span class="token operator">=</span> <span class="token string">'env-spinner-bounce'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">DOCUMENT</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">ENVISION</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>envision<span class="token punctuation">;</span><br><br><span class="token comment">/**<br> * Creates the HTML markup for an envision dialog.<br> * <br> * @param {object} options An object literal with options.<br> * @param {string} options.dialogId A unique html ID for the dialog.<br> * @param {string} [options.views=[]]<br> * @returns {string}<br> */</span><br><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Dialog</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> dialogId<span class="token punctuation">,</span> nodeId<span class="token punctuation">,</span> views <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> dialogId<span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>nodeId <span class="token operator">=</span> nodeId<span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>views <span class="token operator">=</span> views<span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>isLoading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>version <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>  <br>    <span class="token keyword">this</span><span class="token punctuation">.</span>tid <span class="token operator">=</span> dialogId <span class="token operator">+</span> <span class="token string">'-t'</span><span class="token punctuation">;</span> <span class="token comment">// title</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>cid <span class="token operator">=</span> dialogId <span class="token operator">+</span> <span class="token string">'-c'</span><span class="token punctuation">;</span> <span class="token comment">// content</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>ctxid <span class="token operator">=</span> dialogId <span class="token operator">+</span> <span class="token string">'-ctx'</span><span class="token punctuation">;</span> <span class="token comment">// context node id field</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>bid <span class="token operator">=</span> dialogId <span class="token operator">+</span> <span class="token string">'-b'</span><span class="token punctuation">;</span> <span class="token comment">// button id prefix</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>bgid <span class="token operator">=</span> dialogId <span class="token operator">+</span> <span class="token string">'-bg'</span><span class="token punctuation">;</span> <span class="token comment">// button group</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>fid <span class="token operator">=</span> dialogId <span class="token operator">+</span> <span class="token string">'-f'</span><span class="token punctuation">;</span> <span class="token comment">// footer</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>lid <span class="token operator">=</span> dialogId <span class="token operator">+</span> <span class="token string">'-l'</span><span class="token punctuation">;</span> <span class="token comment">// loader</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>sfid <span class="token operator">=</span> dialogId <span class="token operator">+</span> <span class="token string">'-sf'</span><span class="token punctuation">;</span> <span class="token comment">// Search filter</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>siid <span class="token operator">=</span> dialogId <span class="token operator">+</span> <span class="token string">'-si'</span><span class="token punctuation">;</span> <span class="token comment">// Search input</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>views<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">view</span><span class="token punctuation">)</span> <span class="token operator">=></span> view<span class="token punctuation">.</span><span class="token function">setDialog</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">el</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token constant">DOCUMENT</span><span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <br><br>  <span class="token function">init</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> dialogId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span><br>    <span class="token keyword">const</span> titleId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tid<span class="token punctuation">;</span><br>    <span class="token keyword">const</span> searchInputId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>siid<span class="token punctuation">;</span><br>  <br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span>dialogId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <br>    <span class="token comment">// Insert dialog into end of body and show dialog with envision.</span><br>    <span class="token constant">DOCUMENT</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">'beforeend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><br>    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dialogId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">--inner-scroll" style="z-index:99999" role="dialog" aria-modal="true" aria-labelledby="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>titleId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" aria-hidden="true" tabindex="-1"><br>      &lt;div class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__dialog </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__dialog--large"><br>        &lt;section class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__content"><br>          &lt;header class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__header"><br>            &lt;h5 id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>titleId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="env-text env-d--flex env-flex--align-items-center env-flex--justify-content-between </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__header__title"><br>              Sitevision inspector<br>              &lt;div id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">SPINNER_CLASS</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">SPINNER_CLASS</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">--hide </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">SPINNER_CLASS</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">--fade-in" data-delay="medium"><br>                </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="env-bounce</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">">&lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>              &lt;/div><br>            &lt;/h5><br>            &lt;div id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctxid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="env-m-top--small"><br>              &lt;div class="env-form-element"><br>                &lt;div class="env-form-element__control env-form-input-group"><br>                  &lt;label for="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctxid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-f" class="env-form-input-group__label" style="flex-shrink:0">ID&lt;/label><br>                  &lt;input class="env-form-input" id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctxid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-f" readonly value="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"><br>                  &lt;button data-ctx-action="edit" type="button" class="env-button env-button--primary env-button--icon"><br>                    Edit context node id<br>                    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Icons<span class="token punctuation">.</span><span class="token constant">EDIT</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'&lt;svg'</span><span class="token punctuation">,</span> <span class="token string">'&lt;svg style="pointer-events:none" class="env-icon"'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>                  &lt;/button><br>                &lt;/div><br>              &lt;/div><br>              &lt;button data-ctx-action="save" type="button" class="env-d--none env-button env-button--success env-button--icon"><br>                Change context node id<br>                &lt;svg style="pointer-events:none" class="env-icon"><br>                  &lt;use href="/sitevision/envision-icons.svg#icon-check-line">&lt;/use><br>                &lt;/svg><br>              &lt;/button><br>              &lt;button data-ctx-action="cancel" type="button" class="env-d--none env-button env-button--ghost env-button--danger env-button--icon"><br>                Cancel change<br>                &lt;svg style="pointer-events:none" class="env-icon"><br>                  &lt;use href="/sitevision/envision-icons.svg#icon-delete">&lt;/use><br>                &lt;/svg><br>              &lt;/button><br>            &lt;/div><br>            &lt;div id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>bgid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="env-button-group env-m-top--small"><br>              </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>views<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">view<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;button id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>bid <span class="token operator">+</span> i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" type="button" class="env-button env-flex__item--grow-1" data-view-index="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>view<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/button></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>            &lt;/div><br>          &lt;/header><br>          &lt;div class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__body"><br>            &lt;div id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>sfid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="env-form-element"><br>              &lt;label for="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>searchInputId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="env-form-element__label">Filter query&lt;/label><br>              &lt;div class="env-form-element__control"><br>                &lt;input type="search" class="env-form-input env-form-input--search" id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>searchInputId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" /><br>              &lt;/div><br>            &lt;/div><br><br>            &lt;div id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>cid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">">View properties, nodes and headless data with the buttons above.&lt;/div><br>          &lt;/div><br>          &lt;footer id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>fid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASS_BASE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__footer env-d--flex env-flex--justify-content-between"><br>            &lt;fieldset class="env-form-element__control env-d--flex env-flex--align-items-center" style="gap: var(--env-spacing-medium);"><br>              &lt;legend class="env-form-element__label env-m-bottom--0" style="float: left; font-weight: 700;">Version:&lt;/legend><br>              &lt;label class="env-radio env-m-bottom--0">&lt;input type="radio" name="version" value="1" checked>Online (Public)&lt;/label><br>              &lt;label class="env-radio env-m-bottom--0">&lt;input type="radio" name="version" value="0">Offline (Edit)&lt;/label><br>            &lt;/fieldset><br>            &lt;button type="button" data-modal-dialog-dismiss class="env-button">Close&lt;/button><br>          &lt;/footer><br>        &lt;/section><br>      &lt;/div><br>    &lt;/div></span><span class="token template-punctuation string">`</span></span><br>    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> <span class="token function-variable function">changeView</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">viewIndex</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">const</span> currentIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">;</span><br>      <span class="token keyword">const</span> isReload <span class="token operator">=</span> viewIndex <span class="token operator">===</span> currentIndex<span class="token punctuation">;</span><br><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isReload<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bid <span class="token operator">+</span> currentIndex<span class="token punctuation">)</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token constant">ACTIVE_CLASS</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">detach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">=</span> viewIndex<span class="token punctuation">;</span><br>      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isReload<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bid <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token constant">ACTIVE_CLASS</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> ctxContainer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctxid<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> ctxInput <span class="token operator">=</span> ctxContainer<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> saveAndCancelBtns <span class="token operator">=</span> ctxContainer<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'[data-ctx-action="save"], [data-ctx-action="cancel"]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> editBtn <span class="token operator">=</span> ctxContainer<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'[data-ctx-action="edit"]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> <span class="token function-variable function">reloadView</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">await</span> <span class="token function">changeView</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> <span class="token function-variable function">showCtxButtons</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">btns</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctxid<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.env-form-input-group'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token operator">...</span>btns<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      btns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">btn</span> <span class="token operator">=></span> btn<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'env-d--none'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> <span class="token function-variable function">hideCtxButtons</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">btns</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctxid<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token operator">...</span>btns<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      btns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">btn</span> <span class="token operator">=></span> btn<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'env-d--none'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> <span class="token function-variable function">ctxIsOpen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> ctxInput<span class="token punctuation">.</span>readOnly <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> <span class="token function-variable function">ctxSave</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setNodeId</span><span class="token punctuation">(</span>ctxInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token function">hideCtxButtons</span><span class="token punctuation">(</span>saveAndCancelBtns<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token function">showCtxButtons</span><span class="token punctuation">(</span>editBtn<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      ctxInput<span class="token punctuation">.</span>readOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>      <span class="token keyword">await</span> <span class="token function">reloadView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> <span class="token function-variable function">ctxCancel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token function">hideCtxButtons</span><span class="token punctuation">(</span>saveAndCancelBtns<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token function">showCtxButtons</span><span class="token punctuation">(</span>editBtn<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      ctxInput<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeId<span class="token punctuation">;</span><br>      ctxInput<span class="token punctuation">.</span>readOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> <span class="token function-variable function">ctxButtonCallback</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isLoading <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^button$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>tagName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">const</span> action <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>ctxAction<span class="token punctuation">;</span><br><br>        <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">case</span> <span class="token string">'edit'</span><span class="token operator">:</span><br>            <span class="token function">showCtxButtons</span><span class="token punctuation">(</span>saveAndCancelBtns<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token function">hideCtxButtons</span><span class="token punctuation">(</span>editBtn<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            ctxInput<span class="token punctuation">.</span>readOnly <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>            ctxInput<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            ctxInput<span class="token punctuation">.</span><span class="token function">setSelectionRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> ctxInput<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">break</span><span class="token punctuation">;</span><br>          <span class="token keyword">case</span> <span class="token string">'save'</span><span class="token operator">:</span><br>            <span class="token keyword">await</span> <span class="token function">ctxSave</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">break</span><span class="token punctuation">;</span><br>          <span class="token keyword">case</span> <span class="token string">'cancel'</span><span class="token operator">:</span><br>            <span class="token function">ctxCancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">break</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> <span class="token function-variable function">ctxContainerKeydownCallback</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">'Escape'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">ctxIsOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        event<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">ctxCancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">'Enter'</span> <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>target <span class="token operator">===</span> ctxInput<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        event<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">await</span> <span class="token function">ctxSave</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> <span class="token function-variable function">ctxInputPasteCallback</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">ctxIsOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">const</span> str <span class="token operator">=</span> event<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">const</span> matches <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^svid([0-9]{1,3})_([a-z0-9_]+)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>matches<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>          <span class="token keyword">const</span> <span class="token punctuation">[</span> _<span class="token punctuation">,</span> p1<span class="token punctuation">,</span> p2 <span class="token punctuation">]</span> <span class="token operator">=</span> matches<span class="token punctuation">;</span><br>          ctxInput<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> <span class="token function-variable function">buttonsCallback</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isLoading <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^button$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>tagName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">await</span> <span class="token function">changeView</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>viewIndex<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> <span class="token function-variable function">filterInputCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">applyFilter</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> <span class="token function-variable function">filterKeydownCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token comment">// Prevent Escape from hiding modal if clearing filter input by escape key.</span><br>      <span class="token comment">// When the filter input is empty, act as normal.</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">'Escape'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        event<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>    Events<span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctxid<span class="token punctuation">)</span><span class="token punctuation">,</span> ctxButtonCallback<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    Events<span class="token punctuation">.</span><span class="token function">onKeydown</span><span class="token punctuation">(</span>ctxContainer<span class="token punctuation">,</span> ctxContainerKeydownCallback<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    Events<span class="token punctuation">.</span><span class="token function">onPaste</span><span class="token punctuation">(</span>ctxInput<span class="token punctuation">,</span> ctxInputPasteCallback<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    Events<span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bgid<span class="token punctuation">)</span><span class="token punctuation">,</span> buttonsCallback<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    Events<span class="token punctuation">.</span><span class="token function">onInput</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>siid<span class="token punctuation">)</span><span class="token punctuation">,</span> filterInputCallback<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    Events<span class="token punctuation">.</span><span class="token function">onKeydown</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>siid<span class="token punctuation">)</span><span class="token punctuation">,</span> filterKeydownCallback<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    Events<span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fid<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>version <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>      <span class="token keyword">await</span> <span class="token function">changeView</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bid <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>viewIndex<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">setNodeId</span> <span class="token punctuation">(</span><span class="token parameter">nodeId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>nodeId <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>nodeId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctxid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-f</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeId<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">updateContent</span> <span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cid<span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> html<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">async</span> <span class="token function">attach</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>views<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">await</span> view<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">async</span> <span class="token function">detach</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>views<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">await</span> view<span class="token punctuation">.</span><span class="token function">detach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">setLoading</span> <span class="token punctuation">(</span><span class="token parameter">isLoading</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>isLoading <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>isLoading<span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>lid<span class="token punctuation">)</span><span class="token punctuation">.</span>classList<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>isLoading <span class="token operator">?</span> <span class="token string">'remove'</span> <span class="token operator">:</span> <span class="token string">'add'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">SPINNER_CLASS</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">--hide</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">async</span> <span class="token function">fetch</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>views<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> view<span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    view<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">applyFilter</span> <span class="token punctuation">(</span><span class="token parameter">searchQuery</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>views<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> index <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">getIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token punctuation">(</span>searchQuery <span class="token operator">??</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>siid<span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cid<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'[data-filter-item]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>query <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>index<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'none'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>views<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> renderedView <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>renderedView<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateContent</span><span class="token punctuation">(</span>renderedView<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">applyFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">el</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sfid<span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">getIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <br>  <span class="token function">renderError</span> <span class="token punctuation">(</span><span class="token parameter">errorMessage</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateContent</span><span class="token punctuation">(</span><br>      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="env-alert env-alert--danger"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>errorMessage<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div></span><span class="token template-punctuation string">`</span></span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">toggle</span> <span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token constant">ENVISION</span><span class="token punctuation">.</span><span class="token function">dialog</span><span class="token punctuation">(</span><span class="token string">'#'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token string">'toggle'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>  <br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DialogView</span> <span class="token punctuation">{</span><br>  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>dialog <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_formatter <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_fetch <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_attach <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_detach <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_onUpdateIndex <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_index <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>config <span class="token operator">=</span> config<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">setDialog</span> <span class="token punctuation">(</span><span class="token parameter">dialog</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>dialog <span class="token operator">=</span> dialog<span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">setData</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_data <span class="token operator">=</span> data<span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">buildIndex</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">getIndex</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_index<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">buildIndex</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_buildIndex <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>_index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_buildIndex</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">s</span> <span class="token operator">=></span> s<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">async</span> <span class="token function">fetchData</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <br>    <span class="token keyword">try</span> <span class="token punctuation">{</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_fetch <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_fetch</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">.</span><span class="token function">renderError</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">async</span> <span class="token function">attach</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">try</span> <span class="token punctuation">{</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_attach <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_attach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">.</span><span class="token function">renderError</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">async</span> <span class="token function">detach</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">try</span> <span class="token punctuation">{</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_detach <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_detach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>dialog<span class="token punctuation">.</span><span class="token function">renderError</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_formatter <span class="token keyword">instanceof</span> <span class="token class-name">Formatter</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_data<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_formatter<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">formatter</span> <span class="token punctuation">(</span><span class="token parameter">formatter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_formatter <span class="token operator">=</span> formatter<span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">onBuildIndex</span> <span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_buildIndex <span class="token operator">=</span> cb<span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">onFetchData</span> <span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_fetch <span class="token operator">=</span> cb<span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">onAttach</span> <span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_attach <span class="token operator">=</span> cb<span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">onDetach</span> <span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_detach <span class="token operator">=</span> cb<span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> Dialog<span class="token punctuation">;</span></code></pre>
        </div><div class="mb-6">
          <h3 class="is-size-5">sitevision-api.js</h3>
          <pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">OFFLINE</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">ONLINE</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br><br><span class="token comment">/**<br> * Performs a fetch request to the Sitevision Rest API.<br> * <br> * @param {object} options An object literal with options.<br> * @param {string} options.nodeId The node identifier to perform the api request on.<br> * @param {string} options.path The path to perform the api request on.<br> * @param {string} options.siteName The site's name. Required when using path.<br> * @param {number} [options.version=ONLINE] The version to use.<br> * @param {string} [options.apiMethod='nodes'] The API method to call. (Usually one of: 'nodes', 'properties', 'contentNodes', 'headless')<br> * @param {object} [options.options={}] Options to be passed to the API method.<br> * @param {string} [options.origin=window.location.origin] The origin to send the request to.<br> * @returns {Response}<br> */</span><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sitevisionApi</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> nodeId<span class="token punctuation">,</span> path<span class="token punctuation">,</span> siteName<span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token constant">ONLINE</span><span class="token punctuation">,</span> apiMethod <span class="token operator">=</span> <span class="token string">'nodes'</span><span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> origin <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin<span class="token punctuation">,</span> returnError <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>nodeId <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>path <span class="token operator">&amp;&amp;</span> siteName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">throw</span> <span class="token string">'Api needs either a nodeId or a path.'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <br>  <span class="token keyword">const</span> apiParams <span class="token operator">=</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> fetchOpts <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span><br>      <span class="token string-property property">'Accept'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">const</span> v <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">OFFLINE</span><span class="token punctuation">,</span> <span class="token constant">ONLINE</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>version<span class="token punctuation">)</span> <span class="token operator">?</span> version <span class="token operator">:</span> <span class="token constant">ONLINE</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>origin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/rest-api/1/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>v<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nodeId <span class="token operator">||</span> <span class="token punctuation">(</span>siteName <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/|\/$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>apiMethod<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?format=json&amp;json=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>apiParams<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">===</span> <span class="token constant">OFFLINE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    fetchOpts<span class="token punctuation">.</span>credentials <span class="token operator">=</span> <span class="token string">'same-origin'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">let</span> response<span class="token punctuation">;</span><br>  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token keyword">try</span> <span class="token punctuation">{</span><br>    response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> fetchOpts<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    data <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    response <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">ok</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> response<span class="token punctuation">.</span>status <span class="token punctuation">}</span><span class="token punctuation">;</span><br>    data <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    e <span class="token operator">=</span> <span class="token punctuation">[</span><br>      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Status </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>response<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>      data<span class="token operator">?.</span>description<span class="token punctuation">,</span><br>      data<span class="token operator">?.</span>message<span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span> <span class="token operator">!</span><span class="token operator">!</span>v<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>returnError<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">throw</span> e<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>returnError<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">[</span> data<span class="token punctuation">,</span> e <span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">return</span> data<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
        </div></div>
  </div>
</div>

      </main><!--! .page-main -->

      <footer class="page-footer section has-background-secondary-dark has-text-white py-5">
        <div class="container">
          <p class="has-text-centered">
            <a class="page-footer__link has-text-white" href="https://github.com/hampusn/bookmarklets#readme">
              <strong>bookmarklets</strong>
              <svg class="icon" aria-label="External link"><use href="/assets/img/icons.svg?v=0.12.1#mdi-open-in-new"></use></svg>
            </a>
            is created by
            <a class="page-footer__link has-text-white" href="https://hampus.io/">
              <strong>Hampus Nordin</strong>
              <svg class="icon" aria-label="External link"><use href="/assets/img/icons.svg?v=0.12.1#mdi-open-in-new"></use></svg>
            </a>
          </p>
        </div>
      </footer><!--! .page-footer -->
    </div><!--! .page -->

    <div id="bookmarklet-drag" class="bookmarklet-drag"></div>
    <script type="module" src="/assets/js/main.js?v=0.12.1"></script>
    <!-- Current page: /sitevision-inspector/ -->
  </body>
</html>
